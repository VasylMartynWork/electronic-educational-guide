---
title: Цикли
---

Цикли є керуючими конструкціями, дозволяючи в залежності від певних умов виконувати деяку дію багато разів. У C# є такі види циклів:

- for
- foreach
- while
- do...while

## Цикл for
Цикл for має таке формальне визначення:

	for ([дії_до_виконання_циклу]; [умова]; [дії_після_виконання])
	{
	     // дії
	}

Оголошення циклу for складається із трьох частин. Перша частина оголошення циклу – деякі дії, які виконуються один раз до виконання циклу. Зазвичай тут визначаються змінні, які будуть використовуватись у циклі.

Друга частина - умова, за якої виконуватиметься цикл. Поки умова дорівнює true, виконуватиметься цикл.

І третя частина - деякі дії, які виконуються після завершення блоку циклу. Ці дії виконуються щоразу після завершення блоку циклу.

Після оголошення циклу у фігурних дужках розміщуються самі дії циклу.

Розглянемо стандартний цикл for:

	for (int i = 1; i < 4; i++)
	{
	     Console.WriteLine(i);
	}

Тут перша частина оголошення циклу - int i = 1 - створює та ініціалізує змінну i.

Друга частина - умова i < 4. Тобто доки змінна i менше 4, виконуватиметься цикл.

І третя частина - дії, що виконуються після завершення дій з блоку циклу - збільшення змінної i на одиницю.

Весь процес циклу можна представити так:

1. Визначається змінна int i = 1
2. Перевіряється умова i < 4. Вона істинна (оскільки 1 менше 4), тому виконується блок циклу, а саме інструкція Console.WriteLine(i), яка виводить на консоль значення змінної i
3. Блок циклу закінчив виконання, тому виконується третя частина оголошення циклу - i++. Після цього змінна i дорівнюватиме 2.
4. Знову перевіряється умова i < 4. Вона істинна (оскільки 2 менше 4), тому знову виконується блок циклу - Console.WriteLine(i)
5. Блок циклу закінчив виконання, тому знову виконується вираз i++. Після цього змінна i дорівнюватиме 3.
6. Знову перевіряється умова i < 4. Вона істинна (оскільки 3 менше 4), тому знову виконується блок циклу - Console.WriteLine(i)
7. Блок циклу закінчив виконання, тому знову виконується вираз i++. Після цього змінна i дорівнюватиме 4.
8. Знову перевіряється умова i < 4. Тепер вона буде false, оскільки значення змінної i НЕ менше 4, тому цикл завершує виконання. Далі вже виконується решта програми, яка йде після циклу

У результаті блок циклу спрацює 3 рази, поки значення i не стане рівним 4. І щоразу це значення збільшуватиметься на 1. Одноразове виконання блоку циклу називається ітерацією. Таким чином, тут цикл виконає три ітерації. Результат роботи програми:

	1
	2
	3

Якщо блок циклу for містить одну інструкцію, ми можемо його скоротити, прибравши фігурні дужки:

	for (int i = 1; i < 4; i++)
	     Console.WriteLine(i);
	 
	// або так
	for (int i = 1; i < 4; i++) Console.WriteLine(i);

При цьому необов'язково саме у першій частині циклу оголошувати змінну, а в третій частині змінювати її значення - це можуть бути будь-які дії. Наприклад:

	var i = 1;
	 
	for (Console.WriteLine("Початок виконання циклу"); i < 4; Console.WriteLine($"i = {i}"))
	{
	     i++;
	}

Тут знову ж таки цикл спрацьовує, поки змінна i менше 4, тільки збільшення змінної i відбувається в блоці циклу. Консольний вивід цієї програми:

	Початок виконання циклу
	i = 2
	i = 3
	i = 4

Нам необов'язково вказувати всі умови під час оголошення циклу. Наприклад, ми можемо написати так:

	int i = 1;
	for (; ;)
	{
	     Console.WriteLine($"i = {i}");
	     i++;
	}

Формально визначення циклу залишилося тим самим, тільки тепер блоки у визначенні у нас порожні: for(;;). У нас немає ініціалізованої змінної, немає умови, тому цикл працюватиме вічно – нескінченний цикл.

Ми також можемо опустити ряд блоків:

	int i = 1;
	for (; i<4;)
	{
	     Console.WriteLine($"i = {i}");
	     i++;
	}

Цей приклад по суті еквівалентний першому прикладу: у нас також є змінна-лічильник, тільки визначена вона поза циклом. Ми маємо умову виконання циклу. І є збільшення змінної вже в самому блоці for.

Також варто зазначити, що можна визначати кілька змінних в оголошенні циклу:

	for (int i = 1, j = 1; i < 10; i++, j++)
	     Console.WriteLine($"{i*j}");

Тут у першій частині оголошення циклу визначаються дві змінні: i та j. Цикл виконується, поки i не дорівнюватиме 10. Після кожної ітерації змінні i та j збільшуються на одиницю. Консольний вивід програми:

	1
	4
	9
	16
	25
	36
	49
	64
	81

## Цикл do..while

У циклі do спочатку виконується код циклу, потім відбувається перевірка умови в інструкції while. І поки ця умова є істинною, цикл повторюється.

	do
	{
	     дії циклу
	}
	while (умова)

Наприклад:

	int i = 6;
	do
	{
	     Console.WriteLine(i);
	     i--;
	}
	while (i > 0);

Тут код циклу спрацює 6 разів, доки i не стане рівним нулю. Але важливо зазначити, що цикл do гарантує хоча б одноразове виконання дій, навіть якщо умова в конструкції while не буде істинно. Тобто ми можемо написати:

	int i = -1;
	do
	{
	     Console.WriteLine(i);
	     i--;
	}
	while (i > 0);

Хоча у нас змінна i менше 0, цикл все одно один раз виконається.

## Цикл while

На відміну від циклу do цикл while відразу перевіряє істинність деякої умови, і якщо умова істинна, то код циклу виконується:

	while (умова)
	{
	     дії циклу
	}

Наприклад:

	int i = 6;
	while (i > 0)
	{
	     Console.WriteLine(i);
	     i--;
	}

## Цикл foreach

Цикл foreach призначений для вибору набору або колекції елементів. Його загальне визначення:

	foreach(тип_даних змінна in колекція)
	{
	     // дії циклу
	}

Після оператора foreach у дужках спочатку йде визначення змінної. Потім ключове слово in і далі колекція, елементи якої потрібно перебрати.

При виконанні цикл послідовно перебирає елементи колекції і поміщає їх у змінну, і в блоці циклу ми можемо виконати з ними деякі дії.

Наприклад, візьмемо рядок. Рядок по суті – це колекція символів. І .NET дозволяє перебрати всі елементи рядка - його символи за допомогою циклу foreach.

	foreach(char c in "Tom")
	{
	     Console.WriteLine(c);
	}

Тут цикл foreach пробігається по всіх символах рядка "Tom" і кожен символ поміщає в символьну змінну c. У блоці циклу значення змінної c виводиться на консоль. Оскільки в рядку "Tom" три символи, цикл виконається три рази. Консольний висновок програми:

	T
	o
	m

Варто зазначити, що змінна, яка визначається в оголошенні циклу, повинна за типом відповідати типу елементів колекції, що перебирається. Так, елементи рядка – значення типу char – символи. Тому змінна c має тип char. Проте насправді не завжди буває очевидно, який тип представляють елементи колекції. У цьому випадку ми можемо визначити змінну за допомогою оператора var:

	foreach(var c in "Tom")
	{
	     Console.WriteLine(c);
	}

## Оператори continue та break

Іноді виникає ситуація, коли потрібно вийти з циклу, не чекаючи на його завершення. І тут ми можемо скористатися оператором break.

Наприклад:

	for (int i = 0; i < 9; i++)
	{
	     if (i == 5)
	         break;
	     Console.WriteLine(i);
	}

Хоча за умови циклу сказано, що цикл виконуватиметься, доки лічильник i не досягне значення 9, насправді цикл спрацює 5 разів. Так як при досягненні лічильником i значення 5 спрацює оператор break, і цикл завершиться.

	0
	1
	2
	3
	4

Тепер поставимо собі інше завдання. А якщо ми хочемо, щоб під час перевірки цикл не завершувався, а просто пропускав поточну ітерацію. Для цього ми можемо скористатися оператором continue:

	for (int i = 0; i < 9; i++)
	{
	     if (i == 5)
	         continue;
	     Console.WriteLine(i);
	}

У цьому випадку цикл, коли дійде до числа 5, яке не задовольняє умову перевірки, просто пропустить це число та перейде до наступної ітерації:

	0
	1
	2
	3
	4
	6
	7
	8

Варто зазначити, що оператори break і continue можна використовувати в будь-якому типі циклів.

## Вкладені цикли

Одні цикли можуть бути вкладені в інші. Наприклад:

	for (int i = 1; i < 10; i++)
	{
	     for (int j = 1; j < 10; j++)
	     {
	         Console.Write($"{i*j}\t");
	     }
	     Console.WriteLine();
	}

В даному випадку, цикл for (int i = 1; i < 10; i++) виконується 9 разів, тобто має 9 ітерацій. Але у межах кожної ітерації виконується дев'ять разів вкладений цикл for (int j = 1; j < 10; j++). У результаті програма виведе таблицю множення.